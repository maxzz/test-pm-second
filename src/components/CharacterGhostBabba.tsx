import React from 'react';
import { a, useSpring } from '@react-spring/web';

export function CharacterGhostBabba({ show }: { show: boolean; }) {
    const pathRef = React.useRef<SVGPathElement>(null);
    const [pathLen, setPathLen] = React.useState(0);

    React.useEffect(() => {
        if (pathRef.current) {
            setPathLen(pathRef.current.getTotalLength());
            console.log({ pathLen: pathLen });
        }
    }, [pathRef.current]);

    const styles = useSpring({
        from: { x: 0 },
        to: { x: show ? pathLen : 0 },
    });

    return (
        <div className="relative z-10">
            <div className="absolute top-4 right-64 w-32 h-32 text-purple-900">
                <svg viewBox="0 0 637 450" stroke="currentColor" strokeWidth="5" className="transform scale-x-[-1] fill-[red]" >
                    <a.path
                        ref={pathRef}
                        style={{
                            strokeDashoffset: styles.x,
                            strokeDasharray: pathLen,
                        }}
                        d="M277 131c-34-12-47-49-63-78-9-15-18-28-32-38a57 57 0 00-46-10A196 196 0 0010 130c-5 15-9 30-10 46-1 13-1 37 18 38 13 1 26-7 36-15 11-7 22-16 34-21l10-2h11c4 2 4 8 3 12s-3 8-6 11c-8 12-19 22-21 37 0 6 1 13 6 17 5 5 14 10 21 7 6-2 10-8 14-14l7-12c1-1 2-4 5-5l7 4c3 6 3 14 3 20l-1 18c0 8 2 20 8 25 3 3 7 4 11 2 7-3 9-10 13-16l7-12c1-2 3-7 5-5l1 2 2 5c3 9 3 18 3 26 0 16 1 32 13 44 10 9 24 14 36 20a172 172 0 0158 47l14 20c7 12 17 23 32 20 17-2 26-17 32-31l9-27c3-8 7-17 12-25l5-9c4-4 7-4 12-5 7-2 13-7 19-12 13-9 25-20 31-35l4-12c2-4 4-9 7-11 4-3 8-1 12 2 3 3 6 5 10 6 16 7 35 6 50-3 13-8 25-23 42-17l12 6c3 2 7 4 11 4 6-1 9-8 10-14 6-18 8-37 9-56l-1-58c0-18-1-36-4-54-2-18-7-35-14-51-5-13-14-28-30-29-14 0-28 10-40 17l-22 13-27 16-23 14c-7 4-15 7-22 12-2 1 0 4 1 3l23-13 24-14 48-28 19-11c6-3 14-6 21-6 17 2 25 24 30 37 12 34 13 70 14 105 0 19 1 38-1 56a233 233 0 01-6 42l-4 12c-3 4-7 4-12 2l-11-7c-7-2-14-3-21-1-7 3-13 7-19 12a54 54 0 01-61 6l-9-6c-7-3-12 1-15 6l-9 23c-8 15-21 25-34 34-4 2-7 5-11 6-3 2-7 2-10 3-6 3-9 10-12 16l-11 25-9 24c-5 15-17 33-36 30-15-2-22-20-30-31a176 176 0 00-72-59c-12-6-26-11-34-23-9-14-6-34-7-50l-2-11-4-10c-5-6-11 8-13 11l-7 12c-2 3-4 7-7 9-5 3-9 2-11-2-5-8-6-18-5-27v-21c-1-5-2-12-6-16-2-1-5-2-8-1s-5 4-7 7c-4 7-8 14-14 20-3 4-7 5-12 4-4-2-9-4-11-8-5-5-5-13-3-20 5-14 17-23 23-37 2-5 5-13 0-18-4-4-12-3-17-2-13 2-24 10-34 17-10 8-21 16-33 19-8 3-18 3-22-6-4-8-4-19-3-28C7 115 44 58 95 27c14-9 29-17 45-20 18-2 34 5 47 16 26 23 34 58 55 85 9 11 20 21 34 26 2 1 3-2 1-3z"
                    />
                    <path d="M211 91c13 1 25-7 36-15l31-26c20-17 43-33 68-42l20-5 18 1c13 1 24 6 35 14 20 15 31 39 34 65 2 24-3 49-9 73l-2 9c0 2 3 3 3 1 6-25 12-50 11-75s-9-51-27-69a79 79 0 00-71-20c-13 2-26 8-37 14-13 7-24 15-35 23l-31 27c-6 4-11 9-17 12-5 4-11 7-18 9l-9 1c-2 0-2 3 0 3z" />
                    <path d="M354 119c-2 7-4 14-9 18-3 2-6 4-9 2-2-2-3-5-3-8 0-6 2-13 5-18 1-3 3-5 6-6 2-1 5-2 8-1 2 1 2 3 2 5v8c-1 2 2 3 2 1l1-8c0-3 0-6-2-8-3-2-6-2-9-1-4 1-7 3-9 6l-5 9-2 12c0 3 0 7 3 10 2 2 6 4 9 2 4-2 8-5 10-9l4-13c1-2-2-3-2-1zM374 143c-2-4-1-9 0-13 2-5 4-10 9-10 5-1 11 3 11 8l-3 9-5 7c-2 2-4 3-7 3s-5-1-5-4c-1-2-4-1-3 1 2 6 8 8 14 5 3-2 5-5 6-8l5-10c1-3 1-7-1-10-2-2-5-4-8-4-7-2-12 2-14 8-3 6-4 13-2 19 0 2 3 1 3-1z" />
                    <path d="M375 122c7-10 16-17 28-21l2 6c-10 2-21 8-28 16l-2-1zM335 85c17 1 25 19 22 34h-3c2-14-4-28-19-29v-5zM335 174c-12-4-23-13-28-24l-3-10c0-2-2-1-2 0-8 19-8 45 10 58 8 6 17 8 27 7s19-5 27-11c9-8 17-18 22-30 0-1-2-2-3-1a54 54 0 01-50 11c-2-1-3 2-1 3a57 57 0 0053-12l-2-2c-8 19-24 35-43 39-9 2-18 0-26-4-8-5-13-13-15-22-3-12-1-24 3-35h-3a44 44 0 0033 36c2 0 3-3 1-3zM551 240a354 354 0 0032-121l1-36c0-2-3-2-3 0a341 341 0 01-32 155c-1 2 2 4 2 2zM146 58a163 163 0 00-27 98c0 2 3 2 3 0a161 161 0 0126-96c2-2-1-3-2-2zM185 228c-13-21-24-43-30-66a178 178 0 016-109c1-2-2-3-3-1a185 185 0 0025 177c1 2 3 0 2-1zM572 81c-1 4-1 8-3 11l-2 6-2 6a340 340 0 01-134 178A334 334 0 00570 99l2-6 2-5 1-6c0-2-3-2-3-1z" />
                </svg>

            </div>
        </div>
    );
}
